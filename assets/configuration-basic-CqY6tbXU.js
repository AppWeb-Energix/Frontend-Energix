import{Gt as e,Kt as t,Lt as n,Ot as r,Pt as i,St as a,an as o,in as s,nn as c,yt as l,zt as u}from"./index-B5YZV_9G.js";var d={class:`configuration-container`},f={class:`configuration-content`},p={class:`section-card`},m={class:`form-grid-2`},h={class:`form-group`},g={class:`form-group`},_={class:`form-group`},v={class:`form-group`},y={class:`form-group`},b={class:`section-card`},x={class:`security-grid`},S={class:`form-group`},C={class:`form-group`},w={class:`form-group`},T=a({__name:`configuration-basic`,setup(a){function T(){try{return JSON.parse(localStorage.getItem(`energix-user`))?.id||1}catch{return 1}}let E=s({name:``,lastName:``,email:``,dni:``,district:``,invoiceFileName:``}),D=s({currentPassword:``,newPassword:``,confirmPassword:``});o(null),e(()=>{let e=JSON.parse(localStorage.getItem(`energix-user`));e&&(E.name=e.name||``,E.lastName=e.lastName||``,E.email=e.email||``,E.dni=e.dni||``,E.district=e.district||``)});let O=async()=>{try{let e=T(),t=await fetch(`http://localhost:3001/api/v1/users/${e}`,{method:`PATCH`,headers:{"Content-Type":`application/json`},body:JSON.stringify({name:E.name,lastName:E.lastName,email:E.email,dni:E.dni,district:E.district})});if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.message||`Error al guardar el perfil`)}let n=JSON.parse(localStorage.getItem(`energix-user`));Object.assign(n,{name:E.name,lastName:E.lastName,email:E.email,dni:E.dni,district:E.district}),localStorage.setItem(`energix-user`,JSON.stringify(n)),alert(`Perfil guardado correctamente`)}catch(e){alert(e.message||`Error al guardar el perfil`)}},k=()=>{alert(`Cambios cancelados`)},A=async()=>{if(D.newPassword!==D.confirmPassword){alert(`Las contraseñas no coinciden`);return}try{let e=T();await l(e,D.currentPassword,D.newPassword),alert(`Contraseña actualizada correctamente`),D.currentPassword=``,D.newPassword=``,D.confirmPassword=``}catch(e){alert(e.message||`Error al actualizar la contraseña`)}};return(e,a)=>(t(),n(`div`,d,[i(`div`,f,[a[18]||=u(`<h2 class="main-title" data-v-7993cdeb>Configuración</h2><p class="subtitle" data-v-7993cdeb> Plan actual: <span class="highlight" data-v-7993cdeb>Plan Estudiantil</span> | Historial: <span class="highlight" data-v-7993cdeb>90 días</span> | Dispositivos: <span class="highlight" data-v-7993cdeb>2</span></p>`,2),i(`div`,p,[a[13]||=i(`h3`,{class:`section-title`},`Perfil`,-1),i(`div`,m,[i(`div`,h,[a[8]||=i(`label`,{class:`form-label`},`Nombre`,-1),c(i(`input`,{"onUpdate:modelValue":a[0]||=e=>E.name=e,type:`text`,placeholder:`Jorge`,class:`form-input`},null,512),[[r,E.name]])]),i(`div`,g,[a[9]||=i(`label`,{class:`form-label`},`Apellido`,-1),c(i(`input`,{"onUpdate:modelValue":a[1]||=e=>E.lastName=e,type:`text`,placeholder:`Benavides`,class:`form-input`},null,512),[[r,E.lastName]])]),i(`div`,_,[a[10]||=i(`label`,{class:`form-label`},`Correo`,-1),c(i(`input`,{"onUpdate:modelValue":a[2]||=e=>E.email=e,type:`email`,placeholder:`jorge12@gmail.com`,class:`form-input`},null,512),[[r,E.email]])]),i(`div`,v,[a[11]||=i(`label`,{class:`form-label`},`DNI`,-1),c(i(`input`,{"onUpdate:modelValue":a[3]||=e=>E.dni=e,type:`text`,placeholder:`99999999`,class:`form-input`},null,512),[[r,E.dni]])]),i(`div`,y,[a[12]||=i(`label`,{class:`form-label`},`Distrito`,-1),c(i(`input`,{"onUpdate:modelValue":a[4]||=e=>E.district=e,type:`text`,placeholder:`Miraflores`,class:`form-input`},null,512),[[r,E.district]])])]),i(`div`,{class:`button-group`},[i(`button`,{onClick:O,class:`btn-primary`},`Guardar cambios`),i(`button`,{onClick:k,class:`btn-secondary`},`Cancelar`)])]),i(`div`,b,[a[17]||=i(`h3`,{class:`section-title`},`Seguridad`,-1),i(`div`,x,[i(`div`,S,[a[14]||=i(`label`,{class:`form-label`},`Contraseña actual`,-1),c(i(`input`,{"onUpdate:modelValue":a[5]||=e=>D.currentPassword=e,type:`password`,class:`form-input`},null,512),[[r,D.currentPassword]])]),i(`div`,C,[a[15]||=i(`label`,{class:`form-label`},`Nueva contraseña`,-1),c(i(`input`,{"onUpdate:modelValue":a[6]||=e=>D.newPassword=e,type:`password`,class:`form-input`},null,512),[[r,D.newPassword]])]),i(`div`,w,[a[16]||=i(`label`,{class:`form-label`},`Confirmar contraseña`,-1),c(i(`input`,{"onUpdate:modelValue":a[7]||=e=>D.confirmPassword=e,type:`password`,class:`form-input`},null,512),[[r,D.confirmPassword]])])]),i(`div`,{class:`button-container`},[i(`button`,{onClick:A,class:`btn-primary`},`Actualizar contraseña`)])])])]))}},[[`__scopeId`,`data-v-7993cdeb`]]);export{T as default};