import{xt as e}from"./index-DTcm7Ef5.js";var t=new Set;function n(e){return t.add(e),()=>t.delete(e)}function r(){t.forEach(e=>{try{e()}catch(e){console.error(`Error en listener de dispositivo:`,e)}})}var i=`/devices`.replace(/\/+$/,``),a=`/zones`.replace(/\/+$/,``);const o={async getByUserId(t){try{let n=await e.get(`${i}?userId=${t}`);return Array.isArray(n)?n:[]}catch(e){return console.error(`❌ Error al obtener dispositivos del usuario ${t}:`,e.message),[]}},async create(t,n){try{let a=new Date().toISOString(),o=await e.post(i,{userId:t,linkedAt:a,status:`off`,online:!1,zoneId:null,...n});return r(),o}catch(e){return console.error(`❌ Error al crear dispositivo:`,e.message),null}},async update(t,n){if(!t)return console.warn(`⚠️ update(): ID no definido`),null;try{let a=await e.patch(`${i}/${t}`,n);return r(),a}catch(e){return console.error(`❌ Error al actualizar dispositivo ${t}:`,e.message),null}},async remove(t){if(!t)return console.warn(`⚠️ remove(): ID no definido`),!1;try{let n=await e.delete(`${i}/${t}`);return r(),n}catch(e){return console.error(`❌ Error eliminando device ${t}:`,e.message),!1}},async getZones(t){try{let n=await e.get(`${a}?userId=${t}`);return Array.isArray(n)?n:[]}catch(e){return console.error(`❌ Error al obtener zonas del usuario ${t}:`,e.message),[]}},async createZone(t,n){try{let i=await e.post(a,{userId:t,name:n});return r(),i}catch(e){return console.error(`❌ Error al crear zona:`,e.message),null}},async renameZone(t,n){if(!t)return console.warn(`⚠️ renameZone(): ID no definido`),!1;try{let i=await e.patch(`${a}/${t}`,{name:n});return r(),i}catch(e){return console.error(`❌ Error al renombrar zona ${t}:`,e.message),!1}},async deleteZone(t){if(!t)return console.warn(`⚠️ deleteZone(): ID no definido`),!1;try{let n=await e.delete(`${a}/${t}`);return r(),n}catch(e){return console.error(`❌ Error eliminando zona ${t}:`,e.message),!1}},async setDeviceZone(t,n){if(!t)return console.warn(`⚠️ setDeviceZone(): deviceId no definido`),null;try{let a=await e.patch(`${i}/${t}`,{zoneId:n});return r(),a}catch(e){return console.error(`❌ Error asignando zona a dispositivo ${t}:`,e.message),null}}};export{n,o as t};