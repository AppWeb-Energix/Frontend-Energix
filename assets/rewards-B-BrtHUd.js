import{Bt as e,It as t,Kt as n,Lt as r,Nt as i,Pt as a,St as o,an as s,jt as c,ln as l,qt as u,sn as d,un as f}from"./index-B5YZV_9G.js";var p={class:`wrap`},m={class:`grid`},h={class:`card kpi`},g={class:`kpi-top`},_={class:`points`},v={class:`progress`},y={class:`muted`},b={class:`card kpi`},x={class:`big`},S={class:`muted`},C={class:`card kpi`},w={class:`bullets`},T={class:`card`},E={class:`row between`},D={key:0,class:`badge`},O={key:0,class:`code-box`},k={class:`code`},A={class:`muted`},j={key:1,class:`no-code`},M=[`disabled`],N={key:1,class:`muted small`},P={class:`card`},F={key:0,class:`table`},ee={class:`actions-td`},I=[`onClick`],L={key:1,class:`muted`},R=o({__name:`rewards`,setup(o){let R={rewardPoints:50,maxUsesPerCode:5,cooldownHours:24},z=s(120),B=s(2),V=i(()=>z.value%200/200*100),H=s(``),U=s(null),W=s(null),G=s(``),K=s([{id:`r1`,user:`ana.p`,code:`ENX-1AB2C3`,status:`rewarded`,date:`2025-09-01`,points:50},{id:`r2`,user:`mario.r`,code:`ENX-1AB2C3`,status:`activated`,date:`2025-09-14`,points:0},{id:`r3`,user:`jose.l`,code:`ENX-4XY9W2`,status:`pending`,date:`2025-09-18`,points:0}]),q=i(()=>({total:K.value.length,activated:K.value.filter(e=>e.status===`activated`).length,rewarded:K.value.filter(e=>e.status===`rewarded`).length}));function J(){let e=`ENX-`;for(let t=0;t<6;t++)e+=`ABCDEFGHJKLMNPQRSTUVWXYZ23456789`[Math.floor(Math.random()*32)];return e}function Y(e){return new Date(e).toLocaleDateString()}let X=i(()=>{if(H.value)return!1;if(!W.value)return!0;let e=(Date.now()-W.value.getTime())/36e5;if(e<R.cooldownHours){let t=Math.max(0,R.cooldownHours-e),n=Math.floor(t),r=Math.round((t-n)*60);return G.value=`${n}h ${r}m`,!1}return G.value=``,!0}),Z=i(()=>U.value?new Date(U.value).toLocaleString():``);function Q(e){return e===`pending`?`Pendiente`:e===`activated`?`Activado`:`Recompensado`}function $(){X.value&&(H.value=J(),U.value=new Date(Date.now()+24*3600*1e3),W.value=new Date)}function te(){navigator.clipboard?.writeText(H.value)}function ne(){let e=`${location.origin}/signup?ref=${H.value}`;navigator.share?navigator.share({title:`Únete a Energix`,text:`Regístrate con mi código:`,url:e}):(navigator.clipboard?.writeText(e),alert(`Enlace copiado: `+e))}function re(){H.value=``,U.value=null}function ie(e){let t=K.value.find(t=>t.id===e);!t||t.status!==`activated`||(t.status=`rewarded`,t.points=R.rewardPoints,z.value+=R.rewardPoints)}return(i,o)=>(n(),r(`section`,p,[o[13]||=a(`h2`,{class:`title`},`Recompensas`,-1),o[14]||=a(`p`,{class:`subtitle`},`Invita y gana puntos. Canjéalos pronto por beneficios.`,-1),a(`div`,m,[a(`article`,h,[a(`div`,g,[o[0]||=a(`h3`,null,`Total de puntos`,-1),a(`div`,_,f(z.value),1)]),a(`div`,v,[a(`div`,{class:`bar`,style:l({width:Math.min(V.value,100)+`%`})},null,4)]),a(`p`,y,`Nivel `+f(B.value)+` · `+f(V.value.toFixed(0))+`% hacia el siguiente`,1)]),a(`article`,b,[o[1]||=a(`h3`,null,`Referidos`,-1),a(`p`,x,f(q.value.total),1),a(`p`,S,`Activos: `+f(q.value.activated)+` · Recompensados: `+f(q.value.rewarded),1)]),a(`article`,C,[o[8]||=a(`h3`,null,`Política de referidos`,-1),a(`ul`,w,[o[6]||=a(`li`,null,`1 código activo cada 24 h.`,-1),a(`li`,null,[o[2]||=e(`Recompensa por referido activado: `,-1),a(`b`,null,`+`+f(R.rewardPoints),1),o[3]||=e(` pts.`,-1)]),a(`li`,null,[o[4]||=e(`Máx. `,-1),a(`b`,null,f(R.maxUsesPerCode),1),o[5]||=e(` usos por código.`,-1)]),o[7]||=a(`li`,null,`Requiere plan activo.`,-1)])])]),a(`article`,T,[a(`div`,E,[o[9]||=a(`h3`,null,`Invita con tu código`,-1),H.value?(n(),r(`span`,D,`Código activo`)):t(``,!0)]),H.value?(n(),r(`div`,O,[a(`div`,k,f(H.value),1),a(`div`,{class:`code-actions`},[a(`button`,{class:`btn btn-primary`,onClick:te},`Copiar`),a(`button`,{class:`btn outline`,onClick:ne},`Compartir`),a(`button`,{class:`btn danger`,onClick:re},`Revocar`)]),a(`p`,A,`Caduca: `+f(Z.value),1)])):(n(),r(`div`,j,[o[10]||=a(`p`,{class:`muted`},`No tienes un código activo.`,-1),a(`button`,{class:`btn btn-primary`,disabled:!X.value,onClick:$},`Generar código`,8,M),t(``,!0),G.value?(n(),r(`p`,N,`Próximo intento: `+f(G.value),1)):t(``,!0)]))]),a(`article`,P,[o[12]||=a(`h3`,null,`Historial de referidos`,-1),K.value.length?(n(),r(`table`,F,[o[11]||=a(`thead`,null,[a(`tr`,null,[a(`th`,null,`Usuario`),a(`th`,null,`Código`),a(`th`,null,`Estado`),a(`th`,null,`Fecha`),a(`th`,null,`Puntos`),a(`th`)])],-1),a(`tbody`,null,[(n(!0),r(c,null,u(K.value,e=>(n(),r(`tr`,{key:e.id},[a(`td`,null,f(e.user),1),a(`td`,null,f(e.code),1),a(`td`,null,[a(`span`,{class:d([`status`,e.status])},f(Q(e.status)),3)]),a(`td`,null,f(Y(e.date)),1),a(`td`,null,f(e.points),1),a(`td`,ee,[e.status===`activated`?(n(),r(`button`,{key:0,class:`btn tiny btn-primary`,onClick:t=>ie(e.id)},` Acreditar recompensa `,8,I)):t(``,!0)])]))),128))])])):(n(),r(`p`,L,`Aún no tienes referidos.`))])]))}},[[`__scopeId`,`data-v-90c474f2`]]);export{R as default};